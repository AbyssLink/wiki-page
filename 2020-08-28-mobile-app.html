<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>移动应用开发流程</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="style.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">移动应用开发流程</h1>
<p class="date">2020-08-28T09:33:17+08:00</p>
</header>
<h2 id="什么是移动应用">什么是移动应用？</h2>
<p>移动应用是指设计给<a href="https://zh.wikipedia.org/wiki/智能手机">智能手机</a>、<a href="https://zh.wikipedia.org/wiki/平板電腦">平板电脑</a>或其他<a href="https://zh.wikipedia.org/wiki/移动设备">移动设备</a>运行的一种<a href="https://zh.wikipedia.org/wiki/应用软件">应用程序</a>。</p>
<p>移动应用（Mobile App）运行在移动操作系统（Mobile platform）上，开发中的移动操作系统有：</p>
<table>
<thead>
<tr class="header">
<th>名称</th>
<th>是否开放源码</th>
<th>平台</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Android、Wear OS</td>
<td>是</td>
<td><a href="https://wiki.kfd.me/wiki/智慧型手機">智能手机</a>和<a href="https://wiki.kfd.me/wiki/平板電腦">平板电脑</a>与其他便携式设备</td>
</tr>
<tr class="even">
<td>iOS、iPad OS、watchOS</td>
<td>否</td>
<td>iPhone、iPod touch、iPad 及 Apple Watch</td>
</tr>
<tr class="odd">
<td>Sailfish OS</td>
<td>是</td>
<td>少数几款移动设备</td>
</tr>
<tr class="even">
<td>webOS</td>
<td>是</td>
<td><a href="https://wiki.kfd.me/wiki/電視">电视</a>等<a href="https://wiki.kfd.me/wiki/家電">家电</a>产品</td>
</tr>
</tbody>
</table>
<p>References: <a href="https://wiki.kfd.me/wiki/行動作業系統">移动操作系统</a></p>
<h2 id="移动应用开发流程">移动应用开发流程</h2>
<p><img src="https://i.loli.net/2020/08/31/Ei5AsmLkuXxevjl.png" /></p>
<p>References: <a href="https://www.invonto.com/insights/mobile-app-development-process/">Mobile App Development Process</a></p>
<h2 id="移动应用开发模式">移动应用开发模式</h2>
<p>目前移动应用的技术栈可以分成三类：原生 App，混合 App，跨平台 App。</p>
<h3 id="原生-app-技术栈"><strong>1. 原生 App 技术栈</strong></h3>
<p>原生技术栈（native technology stack）指的是，只能用于特定手机平台的开发技术。比如，安卓平台的 Java 技术栈，iOS 平台的 Object-C 技术栈或 Swift 技术栈。</p>
<p><img src="https://i.loli.net/2020/08/30/wXItp8m6KGkELsF.png" style="zoom:50%;" /></p>
<p>示例应用：iOS 计算器、Reeder、LastPass 等。</p>
<h3 id="混合-app-技术栈"><strong>2. 混合 App 技术栈</strong></h3>
<p>混合技术栈（hybrid technology stack）指的是开发混合 App 的技术，也就是把 Web 网页放到特定的容器中，然后再打包成各个平台的原生 App。所以，混合技术栈其实是 Web 技术栈 + 容器技术栈，典型代表是 PhoneGap、Cordova、Ionic 等框架。</p>
<p><img src="https://www.tigren.com/wp-content/uploads/2017/11/magento-2-mobile-app-magento-hybrid-app-native-app-web-app.png" style="zoom: 20%;" /></p>
<p>示例应用：淘宝、今日头条、微信（微信公众号、微信小程序）、印象笔记、推特、Gmail 等。</p>
<h3 id="跨平台-app-技术栈"><strong>3. 跨平台 App 技术栈</strong></h3>
<p>跨平台技术栈（cross-platform technology stack）指的是使用一种技术，同时支持多个手机平台。它与混合技术栈的区别是，不使用 Web 技术，即它的页面不是 HTML5 页面，而是使用自己的语法写的 UI 层，然后编译成各平台的原生 App。</p>
<p>这个技术栈就是纯粹的容器技术栈，React Native、Xamarin、Flutter 都属于这一类。</p>
<p><img src="https://www.mindinventory.com/blog/wp-content/uploads/2019/11/cross-platform-frameworks-1200x500.png" style="zoom:45%;" /></p>
<p>示例应用：QQ、手机百度、手机京东、Facebook、Instgram、Tesla（React Native），闲鱼、腾讯 Now 直播（Flutter）等。</p>
<p>References: <a href="https://www.ruanyifeng.com/blog/2019/12/mobile-app-technology-stack.html">H5 手机 App 开发入门</a></p>
<h3 id="三种开发模式比较表"><strong>三种开发模式比较表</strong></h3>
<table>
<colgroup>
<col style="width: 4%" />
<col style="width: 40%" />
<col style="width: 26%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr class="header">
<th>类型</th>
<th>原生(NATVIE)</th>
<th>混合(Hybrid)</th>
<th>跨平台(cross-platform)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>开发工具</td>
<td>XCode, Android Studio</td>
<td>Ionic, Visual Studio</td>
<td>React Native, Flutter</td>
</tr>
<tr class="even">
<td>渲染引擎</td>
<td>原生</td>
<td>浏览器</td>
<td>原生</td>
</tr>
<tr class="odd">
<td>开发难易度</td>
<td>😕</td>
<td>🤔</td>
<td>😏</td>
</tr>
<tr class="even">
<td>优点</td>
<td>完全访问设备功能<br/>强大的性能<br/>高质量功能和 UX<br/>访问所有本机 API 和特定于平台的功能</td>
<td>多操作系统支持<br/>代码重用<br/>成本效益<br/>强大的定制功能</td>
<td>多操作系统支持<br/>近乎原生的 UI 性能<br/>代码重用<br/>成本效益</td>
</tr>
<tr class="odd">
<td>缺点</td>
<td>无多平台支持<br/>如需多操作系统支持则开发成本较高<br/>没有代码重用</td>
<td>性能较慢<br/>操作系统功能访问受限<br/>不能与其他本机应用交互</td>
<td>性能较慢<br/>操作系统功能访问受限<br/>与其他本机应用程序交互差</td>
</tr>
</tbody>
</table>
<p>References: <a href="https://railsware.com/blog/native-vs-hybrid-vs-cross-platform/">Mobile App Development Approaches Explained</a></p>
<h2 id="移动应用开发相关技术">移动应用开发相关技术</h2>
<h3 id="webview-控件">WebView 控件</h3>
<p>通常情况下，App 内部会使用 WebView 控件作为网页引擎。这是系统自带的控件，专门用来显示网页。应用程序的界面，只要放上 WebView，就好像内嵌了浏览器窗口，可以显示网页。</p>
<p><img src="https://i.loli.net/2020/08/28/ni8VwkdqI6HoB9E.jpg" /></p>
<p>不同的 App 技术栈要显示网页，区别仅仅在于怎么处理 WebView 这个原生控件。</p>
<ul>
<li>原生技术栈：需要开发者自己把 WebView 控件放到页面上。</li>
<li>混合技术栈：页面本身就是网页，默认在 WebView 中显示。</li>
<li>跨平台技术栈：提供一个 WebView 的语法，编译的时候将其换成原生的 WebView。</li>
</ul>
<h3 id="微服务">微服务</h3>
<p><strong>微服务</strong> (Microservices) 是一种<a href="https://zh.wikipedia.org/wiki/软件架构">软件架构风格</a>，它是以专注于单一责任与功能的小型功能区块 (Small Building Blocks) 为基础，利用模块化的方式组合出复杂的大型应用程序，各功能区块使用与语言无关 (Language-Independent/Language agnostic) 的 API 集相互通信。</p>
<p>References: <a href="https://zh.wikipedia.org/zh-cn/微服務">微服务</a></p>
<p>以微信为例，腾讯在介绍微信微服务架构的论文中写道，微信将其微服务分类为“入口跳转”服务（用于接收外部请求的前端服务）、“共享跳转”服务（中间层协调服务）以及“基本服务”（不向任何其它服务暴露，因此可充当请求接收方的服务）。</p>
<p><img src="https://i.loli.net/2020/08/28/L5nKeTSXlD4dfk6.jpg" /></p>
<p>References: https://www.cs.columbia.edu/~ruigu/papers/socc18-final100.pdf</p>
<h2 id="移动应用架构示例">移动应用架构示例</h2>
<h3 id="微信">微信</h3>
<h4 id="前台架构">前台架构</h4>
<p><img src="https://static001.infoq.cn/resource/image/13/1e/13579dfda32fe8948d4fa3745bbfb11e.png" /></p>
<h4 id="后台架构">后台架构</h4>
<p><img src="https://i.loli.net/2020/08/28/Nt1HTmBErdXu2kQ.png" /></p>
<p>References: https://cloud.tencent.com/developer/article/1445567</p>
<h2 id="如何发布移动应用">如何发布移动应用</h2>
<h3 id="ios-应用发布方式">iOS 应用发布方式</h3>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 93%" />
</colgroup>
<thead>
<tr class="header">
<th>发布方式</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>App Store</td>
<td>Apple 目前唯一的官方应用商店，需要 Apple 审核</td>
</tr>
<tr class="even">
<td>TestFlight</td>
<td>Apple 的内测应用商店，可通过电子邮件分发下载链接<br />外部人员测试需 Apple 审核（上限 2000 人）<br />内部人员测试无需审核（上限 25 人）</td>
</tr>
</tbody>
</table>
<h3 id="apple-开发者账号对比">Apple 开发者账号对比</h3>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 6%" />
<col style="width: 8%" />
<col style="width: 9%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="header">
<th>类型</th>
<th>费用</th>
<th>App Sotre 上架</th>
<th>需要 DUNS Number</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>个人（Individual）</td>
<td>99$ / year</td>
<td>是</td>
<td>否</td>
<td>个人和公司账号只能上架 App Store 供用户下载。<br />如果发布 APP 到自己服务器，最多只支持 100 台手机安装。</td>
</tr>
<tr class="even">
<td>公司（Company）</td>
<td>99$ / year</td>
<td>是</td>
<td>是</td>
<td>和个人版的不同：允许多个开发者进行协作开发，可以设置多个 Apple ID</td>
</tr>
<tr class="odd">
<td>企业（Enterprise）</td>
<td>299$ /year</td>
<td>否</td>
<td>是</td>
<td>无法上架 App Store 只能通过自己的服务器或者三方平台安装，只能企业内部使用，否则有被封号的风险。</td>
</tr>
</tbody>
</table>
<p>References:</p>
<p><a href="https://developer.apple.com/documentation/xcode/distributing_your_app_for_beta_testing_and_releases">Distributing your App</a></p>
<p><a href="https://developer.apple.com/support/code-signing/">Code Signing</a></p>
<p><a href="https://www.jianshu.com/p/8190cf4a8172">Apple 开发者账号介绍及证书配置说明</a></p>
<h3 id="向-app-store-发布应用前">向 App Store 发布应用前</h3>
<ol type="1">
<li>测试应用是否有奔溃和错误</li>
<li>确保所有应用信息和元数据完整且准确</li>
<li>提供有效的演示账户和登陆信息</li>
<li>启用后端服务，保证在审核期间处于活动状态</li>
<li>检查应用是否遵循特定文档的指导，如：
<ol type="1">
<li>人机界面准则</li>
<li>营销资源和身份准则</li>
<li>Apple 支付身份准则</li>
</ol></li>
</ol>
<p>References: <a href="https://developer.apple.com/app-store/review/guidelines/">App Store Review Guidelines</a></p>
<h3 id="在-app-store-发布">在 App Store 发布</h3>
<ol type="1">
<li>生成应用程序 ID</li>
<li>在 XCode 中建立档案</li>
<li>设置 App Store Connect:
<ol type="1">
<li>创建新应用</li>
<li>填写应用信息</li>
<li>确定价格和供货量</li>
<li>提交审查</li>
</ol></li>
<li>创建支持和隐私协议网站</li>
<li>提交审查，等待发布</li>
</ol>
<p>References: <a href="https://blog.usejournal.com/how-to-publishing-an-app-to-the-app-store-2019-guide-1c73a582136c">how to publish app to app store</a></p>
<h3 id="android-应用发布方式">Android 应用发布方式</h3>
<table>
<thead>
<tr class="header">
<th>发布方式</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>应用市场</td>
<td>如 Google Play，各大安卓厂商定制的应用市场，可同时在多个市场中分发</td>
</tr>
<tr class="even">
<td>网站或服务器（包括私人和企业服务器）</td>
<td>用户需要允许安装位置来源的应用<br />无法使用许可服务来组织他人未经授权使用</td>
</tr>
</tbody>
</table>
<h3 id="向-android-应用市场发布应用前">向 Android 应用市场发布应用前</h3>
<ol type="1">
<li>查看核对清单以规划发布</li>
<li>选定合适的受众群体和设备类型
<ol type="1">
<li>Android 设备</li>
<li>Android Wear、Android TV、Android Auto 平台</li>
</ol></li>
<li>测试应用
<ol type="1">
<li>发布测试报告和奔溃报告</li>
<li>测试应用的每个语言版本</li>
<li>监控统计数据以发现非预期的变化</li>
</ol></li>
</ol>
<p>References: <a href="https://developer.android.com/distribute/best-practices/launch?hl=zh-cn">Android Developer: Distribution</a></p>
<h3 id="在-android-应用市场发布">在 Android 应用市场发布</h3>
<p><strong>在 Google Play 发布：</strong></p>
<ol type="1">
<li>注册 Google Play 开发者账号</li>
<li>接受开发者分发协议</li>
<li>缴纳注册费</li>
<li>完善账号详细信息</li>
<li>使用 play 管理中心
<ol type="1">
<li>上传应用</li>
<li>设置定价和分发番位</li>
<li>设置开放式测试、封闭式测试或内部测试</li>
<li>查看报告、统计信息和评价</li>
</ol></li>
</ol>
<p>References: <a href="https://support.google.com/googleplay/android-developer/answer/6112435?hl=zh-Hans">如何使用 Play 管理中心</a></p>
<p><strong>在华为应用市场发布：</strong></p>
<ol type="1">
<li>注册登录华为开发者联盟并通过实名认证。 进入应用市场管理页面发布新应用，填写应用信息并上传 APK。</li>
<li>选择语言设置，完善应用基础信息设置。</li>
<li>选择付费情况，勾选需要分发的国家及地区，并填写隐私声明链接。</li>
<li>检查产品包信息、分发信息和基础信息是否正确。 确认无误点击提交完成新应用上传。</li>
</ol>
<p>References: <a href="https://developer.huawei.com/consumer/cn/doc/distribution/app/agc-create_app">华为应用分发流程</a></p>
<footer>
  <hr />
  <p>
    <a href="../">
      <span>← 返回上一级</span>
    </a>
  </p>
  <p>
    <span>许可证：</span>
    <span
      ><a
        rel="license noopener"
        href="https://creativecommons.org/licenses/by-nc-nd/4.0/"
        target="_blank"
        >CC BY-NC-ND 4.0</a
      ></span
    >
  </p>
</footer>
</body>
</html>
